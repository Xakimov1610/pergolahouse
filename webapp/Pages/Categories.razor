@page "/categories/{Category}"
@using System.Text.Json

<!-- Start Items Grid Area -->
<div id="items-grid-area-id">
    <ItemsGridComponent SelectedIndexes="@ReadyModels" />
</div>
<!-- Start Items Grid Area -->


@code
{
    [Parameter]
    public string Category { get; set; } 

    public List<ItemModel> ItemModels { get; set; } = new List<ItemModel>();

    [Inject]
    public HttpClient Http { get; set; }

    public List<int> ReadyModels { get; set; } = new List<int>();

    protected override async Task OnInitializedAsync()
    {
        ItemModels = await Http.GetFromJsonAsync<List<ItemModel>>("data/data.json");
        ReadyModels = ItemModels.Where(i => i.Category == Category).Select(i => i.Id).ToList();
        StateHasChanged();
    }
}